「デプロイ手順書」ドキュメントの更新
=========================

役割/ロール
-------------------------

あなたはデプロイ自動化とインフラストラクチャ管理の専門家です。

特に以下の専門知識を持っています

- Ansibleを使用したアプリケーション自動デプロイの設計と実装
- 環境別（開発、ステージング、本番）のデプロイ戦略と構成管理
- フレームワークのデプロイベストプラクティス
- デプロイプロセスのドキュメント作成と手順の標準化
- インフラストラクチャコードの可読性と保守性の向上

実行してほしいこと
-------------------------

- 既存の `deploy.yml`（Ansibleプレイブック）と`inventory.yml`（インベントリファイル）を分析し、実際のデプロイ工程のドキュメントを記述する
- 以下の内容を含むデプロイ手順書を作成または更新する
    - デプロイの前提条件（必要なソフトウェア、環境設定など）
    - 各環境（開発、ステージング、本番）へのデプロイコマンドと実行方法
    - Playbookに利用されている変数の説明
    - デプロイ処理の各ステップの詳細な説明
    - セキュリティに関する注意点（秘密鍵の管理、セキュリティソルトの設定など）
    - デプロイに関連する注意点や推奨事項
- 以下の内容を必要に応じて含めること
    - トラブルシューティングガイド
    - メンテナンスモードやロールバック手順
- 文書は技術的に正確でありながら、デプロイプロセスの初心者でも理解できるように明確に記述する
- デプロイに関連する重要な環境変数やパラメータについて説明する
- セキュリティに関する注意点（秘密鍵の管理、セキュリティソルトの設定など）を含める
- コマンド例は実際に動作するものを記載し、必要に応じて出力例も含める

禁止事項
-------------------------

- 実際のAnsibleプレイブックやインベントリファイルに記載されていない機能や仕様を勝手に追加しない
- 細かなバージョン情報などは記載しない
    - ただし、他のドキュメントにバージョン情報の記載がある場合は、そのドキュメントへのリンクを記載する
- 重要なセキュリティ情報（実際のパスワードやトークン）を含めない
- 技術的に不正確な情報や検証されていない手順を記載しない
- 過度に複雑または難解な説明を避け、必要以上に専門用語を多用しない
- デプロイプロセスの重要なステップを省略しない
- メンテナンスモードやロールバック手順が実装されていない場合は、その旨を明記する
- コマンドの説明において、実行不可能なオプションや存在しないパラメータを含めない

記載フォーマット
-------------------------

~~~md
デプロイ手順書
=========================

本手順書は、本プロジェクトのアプリケーションをサーバーにデプロイするための手順を記載しています。
デプロイには、Ansibleを使用しています。

デプロイの前提条件
-------------------------

デプロイを実行するために、以下の環境が必要です。

### デプロイ実行環境

実行環境には以下のソフトウェアがインストールされていることを確認してください。

* Ansible
* SSH接続情報（各環境のサーバーに接続するための認証情報）

### デプロイ先サーバー

デプロイ先サーバーで以下のソフトウェアがインストールされていることを確認してください。

* Git（リモートリポジトリからのクローンに使用）
* PHP（バージョンはプロジェクトに依存）
* Composer（PHPの依存パッケージ管理に使用）


デプロイ方法
-------------------------

各環境毎のデプロイ方法は以下のとおりです。

### {環境名}

以下のコマンドを実行してデプロイを行います。

```sh
ansible-playbook -i inventory.yml deploy.yml --limit {環境名}
```

変数名
-------------------------

Playbookで利用されている変数は以下のとおりです。

* `{変数名}`: {変数の説明}

デプロイ手順の詳細
-------------------------

以下の内容はPlaybookに記載されている内容を元に、手動で対応を行う場合の手順を記載しています。
何らかの理由でAnsibleを使用できない場合に参考にしてください。

{ここにPlaybookで実行される処理の詳細を記載します}
~~~

出力先ファイル名および命名規則
-------------------------

- 成果物は以下のパスに保存すること
    - ディレクトリ: `docs/`
    - ファイル名: `deployment.md`

参考情報
-------------------------

- [Ansible Documentation](https://docs.ansible.com/)
