コーディング規約
=========================

改行コードとインデントのルール
-------------------------

基本的なコーディングスタイルは以下のルールに従います。

- 文字コード: UTF-8
- 改行コード: LF (Unix系)
- インデント: スペース
- インデント幅: 基本的に2スペース（言語によって異なる場合あり）
- 行末のスペース: 削除する
- ファイル末尾: 改行を入れる

言語別の詳細なインデント設定:

- PHP: 4スペース
- Markdown: 4スペース（行末の空白は削除しない）

言語別のコーディング規約
-------------------------

### PHP

PHPのコーディング規約は以下の通りです。

- PSR-12に基本的に準拠する
- ただし以下のルールは除外:
    - PSR2.Classes.PropertyDeclaration.Underscore (アンダースコア接頭辞のプロパティを許可)
    - PSR2.Methods.MethodDeclaration.Underscore (アンダースコア接頭辞のメソッドを許可)
    - PSR12.Files.FileHeader.IncorrectOrder (ファイルヘッダーの順序ルールを緩和)
- 配列は短い構文を使用する (`[]`)
- 行の長さは最大160文字、絶対最大は200文字
    - コメントは行長制限の対象外
    - templatesディレクトリ内のファイルは行長制限の対象外
- 名前空間の宣言が必須だが、以下は例外:
    - `/config/Migrations/`
    - `/config/Seeds/`
- ファイルの副作用ルール(PSR1.Files.SideEffects)は以下のディレクトリで適用しない:
    - `/config/`
    - `/tests/`
- メソッド名のキャメルケース(PSR1.Methods.CamelCapsMethodName)は以下のディレクトリで適用しない:
    - `/src/Controller/`
    - `/src/Command/`
    - `/src/Shell/`
    - `/tests/`

詳細は[phpcs.xml](../phpcs.xml)を参照してください。

静的解析ツールとして以下が設定されています:

#### PHPStan

- レベル: 8 (最も厳格)
- DocBlockの型情報を確実なものとして扱わない
- 非ジェネリックオブジェクト型でのジェネリッククラスのチェックを無効化
- 対象パス: `src/`

詳細は[phpstan.neon](../phpstan.neon)を参照してください。

#### Psalm

- エラーレベル: 2
- 対象ディレクトリ: `src/`
- 除外ディレクトリ: `vendor/`

詳細は[psalm.xml](../psalm.xml)を参照してください。

### Markdown

Markdownの規約は以下の通りです。

- 見出しのスタイル:
    - h1とh2はsetext記法(`=`または`-`で下線)
        - 下線の長さは25文字固定
    - h3以降はatx記法(`#`)
    - 見出しの前後に空行を入れること
- h1（最上位見出し）はドキュメント内で1つのみ使用可能
- 同一セグメント内の同じレベルでの見出しの重複は禁止
- リストのスタイル:
    - リストをネストする場合のインデントは4スペース
- インデント: 4スペース
- 行末の空白: 保持する（意図的な改行のため）
- 行の長さ: 最大120文字
    - これはコードブロックや表、見出しを含むすべてに適用
- 裸のURLの使用: 許可（リンクとして明示的に記述する必要はない）
- コードブロック: 言語指定は任意
- 見出しレベル: 1つずつ増やす（h1の次はh2、h2の次はh3のように）

詳細は[.markdownlint.yml](../.markdownlint.yml)を参照してください。

### テキスト文書

テキスト文書（Markdownを含む）の表記統一のため、以下のルールに従います。

#### textlintによる文書品質の確保

テキスト文書の品質を一定に保つため、textlintを使用して以下のルールを適用します：

- 技術文書向けのルール（preset-ja-technical-writing）
    - 一文の長さ、冗長な表現、不自然な日本語などをチェック
- 日本語の間隔ルール（preset-ja-spacing）
    - カタカナ語間の中黒または半角スペース
    - 括弧周りのスペースなし
    - 全角文字間のスペースなし
    - 半角文字と全角文字の間にスペースを入れない
    - 感嘆符や疑問符の後のスペース
- 日本語の品質向上ルール
    - 副詞を平仮名に統一（ja-hiragana-fukushi）
    - 形式名詞を平仮名に統一（ja-hiragana-keishikimeishi）
    - 補助動詞を平仮名に統一（ja-hiragana-hojodoushi）
    - 同義語の使い分け（@textlint-ja/no-synonyms）
- 表記統一ルール（prh）
    - 用語集（glossary.yml）
    - 略語（abbreviations.yml）
    - 固有名詞（names.yml）
    - タイプミス（typo.yml）

#### 略語

略語は正式名称で記述することを基本とします。例えば：

- 「スプシ」ではなく「スプレッドシート」
- 「パワポ」ではなく「パワーポイント」

#### 用語の統一

以下の用語は特に注意して統一した表記を用います：

- 「ベンダ」ではなく「ベンダー」
- 「サーバ」ではなく「サーバー」
- 「カテゴリ」ではなく「カテゴリー」

#### 名前/固有名詞

製品名、言語名、ツール名などの固有名詞は、公式な表記を使用します。例えば：

- OS: Linux, Debian, Ubuntu, Windows, Mac
- 言語: PHP, Node.js, Python, JavaScript, TypeScript
- フレームワーク: Laravel, CakePHP, Symfony
- ツール: Ansible, Terraform
- エディタ: VSCode, Vim, PhpStorm

詳細なルールは[.textlintrc.yml](../.textlintrc.yml)および[ドキュメントルール](../docs/rules/)ディレクトリ内の各設定ファイルを参照してください。
